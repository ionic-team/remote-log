"use strict";var _log,_warn,_error,_info,_deviceIdentifier,_serverUrl,__spreadArray=this&&this.__spreadArray||function(o,e,r){if(r||2===arguments.length)for(var n,i=0,t=e.length;i<t;i++)!n&&i in e||((n=n||Array.prototype.slice.call(e,0,i))[i]=e[i]);return o.concat(n||Array.prototype.slice.call(e))},_pending=(exports.__esModule=!0,exports.initLogger=void 0);function initLogger(o){var e;_log=window.console.log,_warn=window.console.error,_error=window.console.error,_info=window.console.info,_serverUrl=o,window.console.log=consoleLog,window.console.warn=consoleWarn,window.console.error=consoleError,window.console.info=consoleInfo,post("/devices",{id:getDeviceIdentifier(),agent:window.navigator.userAgent,title:window.document.title}),setInterval(function(){document.location.href!=e&&(e=document.location.href,_log("Url changed to ".concat(e)))},1e3)}function getDeviceIdentifier(){var o,e;return _deviceIdentifier||(o=localStorage.IonicLoggerDeviceId,e=parseInt(o),null!=o&&!isNaN(e)||(e=Math.floor(999999999*Math.random()),localStorage.IonicLoggerDeviceId=e),_deviceIdentifier=e.toString()),_deviceIdentifier}function write(o,e,r){var e=Array.prototype.slice.call(e),n=o;e.forEach(function(o){""!=n&&(n+=" "),n+="object"==typeof o?JSON.stringify(o):o}),_pending||(_pending=[],setTimeout(function(){post("/log",_pending),_pending=void 0},500)),_pending.push({id:getDeviceIdentifier(),message:n,level:r})}function getStack(){var o=(new Error).stack,o=null==o?void 0:o.split("\n");return null!=o&&o.splice(0,4),o&&0!=o.length?o[0].substr(7,o[0].length-7):""}function post(o,e){if(e)try{fetch("http://".concat(_serverUrl).concat(o),{method:"post",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})}catch(o){}}function consoleLog(o){for(var e=[],r=1;r<arguments.length;r++)e[r-1]=arguments[r];_log.apply(void 0,__spreadArray([o],e,!1)),write(o,e,"log")}function consoleWarn(o){for(var e=[],r=1;r<arguments.length;r++)e[r-1]=arguments[r];_warn.apply(void 0,__spreadArray([o],e,!1)),write(o,e,"warn")}function consoleError(o){for(var e=[],r=1;r<arguments.length;r++)e[r-1]=arguments[r];_error.apply(void 0,__spreadArray([o],e,!1)),write(o,e,"error")}function consoleInfo(o){for(var e=[],r=1;r<arguments.length;r++)e[r-1]=arguments[r];_info.apply(void 0,__spreadArray([o],e,!1)),write(o,e,"info")}exports.initLogger=initLogger;